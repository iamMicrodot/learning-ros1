---
hide:
  - toc
---


# 1 Linuxæ“ä½œç³»ç»ŸåŸºç¡€

## 1.1 ç®€ä»‹

Linuxï¼Œå…¨ç§°GNU/Linuxï¼Œæ˜¯ä¸€å¥—å…è´¹ä½¿ç”¨å’Œè‡ªç”±ä¼ æ’­çš„ç±»Unixæ“ä½œç³»ç»Ÿï¼Œæ˜¯ä¸€ä¸ªå¤šç”¨æˆ·ã€å¤šä»»åŠ¡ã€æ”¯æŒå¤šçº¿ç¨‹å’Œå¤šCPUçš„æ“ä½œç³»ç»Ÿã€‚
ä¼´éšç€äº’è”ç½‘çš„å‘å±•ï¼ŒLinuxå¾—åˆ°äº†æ¥è‡ªå…¨ä¸–ç•Œè½¯ä»¶çˆ±å¥½è€…ã€ç»„ç»‡ã€å…¬å¸çš„æ”¯æŒã€‚å®ƒé™¤äº†åœ¨æœåŠ¡å™¨æ–¹é¢ä¿æŒç€å¼ºåŠ²çš„å‘å±•åŠ¿å¤´ä»¥å¤–ï¼Œåœ¨ä¸ªäººç”µè„‘ã€åµŒå…¥å¼ç³»ç»Ÿä¸Šéƒ½æœ‰ç€é•¿è¶³çš„è¿›æ­¥ã€‚ä½¿ç”¨è€…ä¸ä»…å¯ä»¥ç›´è§‚åœ°è·å–è¯¥æ“ä½œç³»ç»Ÿçš„å®ç°æœºåˆ¶ï¼Œè€Œä¸”å¯ä»¥æ ¹æ®è‡ªèº«çš„éœ€è¦æ¥ä¿®æ”¹å®Œå–„Linuxï¼Œä½¿å…¶æœ€å¤§åŒ–åœ°é€‚åº”ç”¨æˆ·çš„éœ€è¦ã€‚
Linuxä¸ä»…ç³»ç»Ÿæ€§èƒ½ç¨³å®šï¼Œè€Œä¸”æ˜¯å¼€æºè½¯ä»¶ã€‚å…¶æ ¸å¿ƒé˜²ç«å¢™ç»„ä»¶æ€§èƒ½é«˜æ•ˆã€é…ç½®ç®€å•ï¼Œä¿è¯äº†ç³»ç»Ÿçš„å®‰å…¨ã€‚åœ¨å¾ˆå¤šä¼ä¸šç½‘ç»œä¸­ï¼Œä¸ºäº†è¿½æ±‚é€Ÿåº¦å’Œå®‰å…¨ï¼ŒLinuxä¸ä»…ä»…æ˜¯è¢«ç½‘ç»œè¿ç»´äººå‘˜å½“ä½œæœåŠ¡å™¨ä½¿ç”¨ï¼Œç”šè‡³å½“ä½œç½‘ç»œé˜²ç«å¢™ï¼Œè¿™æ˜¯Linuxçš„ä¸€å¤§äº®ç‚¹ã€‚
Linuxå…·æœ‰å¼€æ”¾æºç ã€æ²¡æœ‰ç‰ˆæƒã€æŠ€æœ¯ç¤¾åŒºç”¨æˆ·å¤šç­‰ç‰¹ç‚¹ï¼Œå¼€æ”¾æºç ä½¿å¾—ç”¨æˆ·å¯ä»¥è‡ªç”±è£å‰ªï¼Œçµæ´»æ€§é«˜ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œæˆæœ¬ä½ã€‚å°¤å…¶ç³»ç»Ÿä¸­å†…åµŒç½‘ç»œåè®®æ ˆï¼Œç»è¿‡é€‚å½“çš„é…ç½®å°±å¯å®ç°è·¯ç”±å™¨çš„åŠŸèƒ½ã€‚è¿™äº›ç‰¹ç‚¹ä½¿å¾—Linuxæˆä¸ºå¼€å‘è·¯ç”±äº¤æ¢è®¾å¤‡çš„ç†æƒ³å¼€å‘å¹³å°ã€‚

<figure markdown>
  ![Linux Logo](docs\assets\b8389b504fc2d562853535047a5b87ef76c6a6efc68d.png){ width="300" }
</figure>


## 1.2 ä¸»è¦çš„å‘è¡Œç‰ˆæœ¬

<figure markdown>
| Method      | Description                          |
| :-----------: | :------------------------------------: |
| `debian`       | ![Debian](docs\assets\image-20230424171302822.png){width="200"}  |
| `redhat`       | ![Redhat](docs\assets\image-20230424171322588.png){width="200"} |
| `gentoo`    | ![Gentoo](docs\assets\image-20230424171332108.png){width="200"} |
| `fedora`    | ![Fedora](docs\assets\image-20230424171359014.png){width="200"} |
| `ubuntu`    | ![Ubuntu](docs\assets\image-20230424171405444.png){width="200"} |
</figure>



## 1.3 å®‰è£…Ubuntu

### 1.3.1 å®‰è£…è™šæ‹Ÿæœº

**1.ä¸‹è½½ virtualbox**

è®¿é—®å®˜ç½‘ï¼Œä¸‹è½½å®‰è£…åŒ…ï¼Œå®˜ç½‘ä¸‹è½½åœ°å€ï¼š[VirtualBox](https://www.virtualbox.org/wiki/Downloads)

<figure markdown>
  ![](docs\assets\image-20230516165231428.png){ width="700" }
</figure>


**2.å®‰è£… virtualbox**

virtualbox å®‰è£…æ¯”è¾ƒç®€å•ï¼ŒåŒå‡»ä¸‹è½½å¥½çš„å®‰è£…æ–‡ä»¶ï¼Œä¸€ç›´ "ä¸‹ä¸€æ­¥" å³å¯ã€‚ï¼ˆå¯è‡ªè¡Œä¿®æ”¹å®‰è£…è·¯å¾„ï¼‰

**3.æ·»åŠ è™šæ‹Ÿæœº**

<figure markdown>
  ![](docs\assets\image-20230516165633426.png){ width="700" }

  ![](docs\assets\image-20230516165744287.png){ width="700" }

  ![](docs\assets\image-20230516165852698.png){ width="700" }

  ![](docs\assets\image-20230516165957373.png){ width="700" }
</figure>



### 1.3.2 æ·»åŠ Ubuntué•œåƒ

<figure markdown>
  ![](docs\assets\image-20230516170617623.png){ width="700" }

  ![](docs\assets\image-20230516170721434.png){ width="700" }

  ![](docs\assets\image-20230516170827858.png){ width="700" }

  ![](docs\assets\image-20230516171030755.png){ width="700" }
</figure>

> é•œåƒä¸‹è½½åœ°å€ï¼š[ubuntu-releases-18.04.6å®‰è£…åŒ…ä¸‹è½½_å¼€æºé•œåƒç«™-é˜¿é‡Œäº‘ (aliyun.com)](http://mirrors.aliyun.com/ubuntu-releases/18.04.6/?spm=a2c6h.25603864.0.0.53c74dda4JflW2) â€”â€” ubuntu-18.04.6-desktop-amd64.iso

<figure markdown>
  ![](docs\assets\image-20230516171319848.png){ width="700" }
</figure>


### 1.3.3 å®‰è£…Ubuntu

<figure markdown>
  ![](docs\assets\image-20230517084734274.png){ width="700" }

  ![](docs\assets\image-20230517084739432.png){ width="700" }

  ![](docs\assets\image-20230517084745515.png){ width="700" }

  ![](docs\assets\image-20230517084751588.png){ width="700" }

  ![](docs\assets\image-20230517084801193.png){ width="700" }

  ![](docs\assets\image-20230517084806250.png){ width="700" }

  ![](docs\assets\image-20230517084812700.png){ width="700" }

  ![](docs\assets\image-20230517084830076.png){ width="700" }
</figure>


ç­‰å¾…å®‰è£…å®Œæˆï¼Œé‡å¯ç”µè„‘ï¼Œè¿›è¡Œè´¦å·ç™»å½•å³å¯è¿›å…¥Ubuntuç³»ç»Ÿæ¡Œé¢



## 1.4 ç›®å½•ç»“æ„

Linuxçš„æ“ä½œå¤§éƒ¨åˆ†éƒ½æ˜¯ç›´æ¥æ‰§è¡Œå‘½ä»¤ï¼Œæ²¡æœ‰ä¾¿åˆ©çš„å¯è§†åŒ–æ“ä½œç•Œé¢ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯¹Linuxçš„æ“ä½œå¤§å¤šæ•°æ—¶å€™éƒ½æ˜¯é€šè¿‡ç»ˆç«¯çš„æ–¹å¼ä¸ç³»ç»Ÿè¿›è¡Œäº¤äº’ã€‚

> ç»ˆç«¯æ˜¯ç”¨æˆ·ä¸ç³»ç»Ÿäº¤äº’ä½¿ç”¨çš„å‘½ä»¤è¡Œç•Œé¢ï¼Œå¯ä½¿ç”¨å¿«æ·é”® ++ctrl+alt+t++ æ‰“å¼€



Linuxçš„æ–‡ä»¶ç³»ç»Ÿæ˜¯é‡‡ç”¨çº§å±‚å¼çš„æ ‘çŠ¶ç›®å½•ç»“æ„ï¼Œåœ¨æ­¤ç»“æ„ä¸­çš„æœ€ä¸Šå±‚æ˜¯æ ¹ç›®å½•â€œ/â€ï¼Œç„¶ååœ¨æ­¤ç›®å½•ä¸‹å†åˆ›å»ºå…¶ä»–çš„ç›®å½•ã€‚åœ¨Linuxä¸–ç•Œé‡Œï¼Œä¸€åˆ‡çš†æ–‡ä»¶ã€‚

![Linuxç›®å½•ç»“æ„](docs\assets\Linuxç›®å½•ç»“æ„.png)

* **root**ï¼šè¯¥ç›®å½•ä¸ºç³»ç»Ÿç®¡ç†å‘˜ç›®å½•ï¼Œrootæ˜¯å…·æœ‰è¶…çº§æƒé™çš„ç”¨æˆ·
* **bin** ï¼šå­˜æ”¾ç³»ç»Ÿé¢„è£…çš„äºŒè¿›åˆ¶ï¼ˆbinaryï¼‰å¯æ‰§è¡Œç¨‹åºï¼Œè¿™é‡Œå­˜æ”¾çš„å¯æ‰§è¡Œæ–‡ä»¶å¯ä»¥åœ¨ç³»ç»Ÿçš„ä»»ä½•ç›®å½•ä¸‹æ‰§è¡Œ
* **boot**ï¼šå¯åŠ¨ï¼ˆbootï¼‰æ—¶ç”¨åˆ°çš„æ ¸å¿ƒé…ç½®æ–‡ä»¶
* **dev**ï¼šè®¾å¤‡ï¼ˆdeviceï¼‰æ–‡ä»¶
* **etc**ï¼šå­˜æ”¾ç³»ç»Ÿç®¡ç†æ‰€éœ€çš„é…ç½®æ–‡ä»¶ã€å¯åŠ¨è„šæœ¬ç­‰ï¼ˆetcï¼‰
* **home**ï¼šæœ¬åœ°ç”¨æˆ·ä¸»ï¼ˆhomeï¼‰ç›®å½•
* **var**ï¼šç»å¸¸å˜åŒ–çš„ï¼ˆvariableï¼‰æ–‡ä»¶ï¼Œä¾‹å¦‚æ—¥å¿—æˆ–æ•°æ®åº“ç­‰
* **lib**ï¼šç³»ç»Ÿåº“ï¼ˆlibrariesï¼‰æ–‡ä»¶ï¼Œå­˜æ”¾æœ€åŸºæœ¬çš„åŠ¨æ€é“¾æ¥å…±äº«åº“ï¼Œå‡ ä¹æ‰€æœ‰çš„åº”ç”¨ç¨‹åºéƒ½è¦ç”¨åˆ°è¯¥ç›®å½•ä¸‹çš„æ–‡ä»¶
* **usr**ï¼šåŒ…å«ç»å¤§éƒ¨åˆ†æ‰€æœ‰ç”¨æˆ·ï¼ˆusersï¼‰éƒ½èƒ½è®¿é—®çš„åº”ç”¨ç¨‹åºå’Œæ–‡ä»¶



## 1.5 å¸¸ç”¨å‘½ä»¤

> å¸¸ç”¨çš„ç»ˆç«¯å·¥å…·terminatorï¼Œå¯ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…
>
> `sudo apt install terminator`
>
> ç»ˆç«¯å¯åŠ¨å¿«æ·é”®ï¼š++ctrl+alt+t++
>


* **pwd**ï¼š pwdï¼ˆPrint Working Directoryï¼‰å‘½ä»¤ç”¨äºæ˜¾ç¤ºå½“å‰çš„å·¥ä½œç›®å½•

```shell
vkrobot@vkrobotï¼š~$ pwd
/home/vkrobot
```



* **ls**ï¼š lsï¼ˆListï¼‰å‘½ä»¤ç”¨äºæ˜¾ç¤ºæŒ‡å®šå·¥ä½œç›®å½•ä¹‹ä¸‹çš„å†…å®¹

```shell
vkrobot@vkrobotï¼š~$ ls --help
ç”¨æ³•ï¼šls[é€‰é¡¹]...[æ–‡ä»¶]...
List information about the FILES (the current directory by default).

-a, -all  ä¸éšè—ä»»ä½•ä»¥. å¼€å§‹çš„é¡¹ç›®
-l        ä½¿ç”¨è¾ƒé•¿æ ¼å¼åˆ—å‡ºä¿¡æ¯
...

vkrobot@vkrobotï¼š~$ ls -al
```



* **cd**ï¼š cdï¼ˆChange Directoryï¼‰å‘½ä»¤ç”¨äºåˆ‡æ¢ç›®å½•ï¼Œå˜æ¢å·¥ä½œç›®å½•è‡³ dirNameï¼Œå…¶ä¸­ dirName ä¸ºç»å¯¹è·¯å¾„æˆ–ç›¸å¯¹è·¯å¾„

```shell
vkrobot@vkrobotï¼š~$ pwd
/home/vkrobot
vkrobot@vkrobotï¼š~$ cd ..
vkrobot@vkrobotï¼š~$ pwd
/home
vkrobot@vkrobotï¼š~$ cd /
vkrobot@vkrobotï¼š~$ pwd
/
```



* **clear**ï¼š clearå‘½ä»¤ç”¨äºæ¸…å±
* **mkdir**ï¼š mkdirï¼ˆMake Directoryï¼‰å‘½ä»¤ç”¨äºåˆ›å»ºç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰

```shell
vkrobot@vkrobotï¼š~$ mkdir --help
ç”¨æ³•ï¼šmkdir [é€‰é¡¹]... ç›®å½•...
Create the DIRECTORT(ies), if they do not exist.
```



* **touch**ï¼š touchå‘½ä»¤ç”¨äºåˆ›å»ºæ–‡ä»¶

```shell
vkrobot@vkrobotï¼š~$ touch --help
ç”¨æ³•ï¼štouch [é€‰é¡¹]... æ–‡ä»¶...
A FILE argument that dose not exist is creared empty
```



* **rm**ï¼š rmï¼ˆRemoveï¼‰å‘½ä»¤ç”¨äºåˆ é™¤ç›®å½•ï¼ˆæ–‡ä»¶å¤¹ï¼‰æˆ–æ–‡ä»¶

```shell
vkrobot@vkrobotï¼š~$ rm --help
ç”¨æ³•ï¼šrm [é€‰é¡¹]... [æ–‡ä»¶]...
Remove (unlink) the FILE(s).

-r, -R, --recursive  remove directories and their contents recusively
-d, --dir            remove empty directories
```



* **chmod**ï¼š chmodå‘½ä»¤ç”¨äºå˜æ›´æ–‡ä»¶æˆ–ç›®å½•çš„æƒé™ã€‚åœ¨Linuxä¸­ï¼Œæ–‡ä»¶æˆ–ç›®å½•æƒé™çš„æ§åˆ¶åˆ†åˆ«ä»¥è¯»å–(r/4)ã€å†™å…¥(w/2)ã€æ‰§è¡Œ(x/1)ä¸‰ç§æƒé™æ¥åŒºåˆ†

```shell
vkrobot@vkrobotï¼š~$ chmod --help
ç”¨æ³•ï¼šchmod [é€‰é¡¹]... æ¨¡å¼[,æ¨¡å¼]... æ–‡ä»¶...
Change the mode of each FILE to MODE.
```



* **sudo**ï¼š sudoæ˜¯å…è®¸ç³»ç»Ÿç®¡ç†å‘˜è®©æ™®é€šç”¨æˆ·æ‰§è¡Œä¸€äº›æˆ–å…¨éƒ¨çš„rootå‘½ä»¤çš„ä¸€ä¸ªå·¥å…·ï¼Œä¹Ÿå°±æ˜¯æš‚æ—¶æå‡æ™®é€šç”¨æˆ·çš„æƒé™


# 2 ROSç¼–ç¨‹åŸºç¡€

## 2.1 ROSæ˜¯ä»€ä¹ˆ

ROS (Robot Operating System, æœºå™¨äººæ“ä½œç³»ç»Ÿ) æä¾›ä¸€ç³»åˆ—ç¨‹åºåº“å’Œå·¥å…·ä»¥å¸®åŠ©è½¯ä»¶å¼€å‘è€…åˆ›å»ºæœºå™¨äººåº”ç”¨è½¯ä»¶ã€‚å®ƒæä¾›äº†ç¡¬ä»¶æŠ½è±¡ã€è®¾å¤‡é©±åŠ¨ã€å‡½æ•°åº“ã€å¯è§†åŒ–å·¥å…·ã€æ¶ˆæ¯ä¼ é€’å’Œè½¯ä»¶åŒ…ç®¡ç†ç­‰è¯¸å¤šåŠŸèƒ½ã€‚ROSéµå¾ªBSDå¼€æºè®¸å¯åè®®ã€‚

<figure markdown>
  ![](http://www.autolabor.com.cn/book/ROSTutorials/docs\assets/13_%E5%89%8D%E8%A8%80.png)
</figure>

ROSè®¾è®¡è€…å°†ROSè¡¨è¿°ä¸ºâ€œROS = Plumbing + Tools + Capabilities + Ecosystemâ€ï¼Œå³ROSæ˜¯é€šè®¯æœºåˆ¶ã€å·¥å…·è½¯ä»¶åŒ…ã€æœºå™¨äººé«˜å±‚æŠ€èƒ½ä»¥åŠæœºå™¨äººç”Ÿæ€ç³»ç»Ÿçš„é›†åˆä½“

<figure markdown>
  ![](docs\assets/%E5%9B%BE%E7%89%871.png)
</figure>


## 2.2 ROSå®‰è£…

**ROSä¸Ubuntuç‰ˆæœ¬å¯¹åº”å…³ç³»**

<figure markdown>
|     ROSç‰ˆæœ¬åç§°      |                             LOGO                             |  å‘å¸ƒæ—¶é—´  | æ”¯æŒçš„æ“ä½œç³»ç»Ÿ |
| :--------------------: | :----------------------------------------------------------: | :--------: | :------------: |
| ROS Noetic Ninjemys  | ![](docs\assets\noetic.png){width="200"} | 2020/05/23 |  Ubuntu 20.04  |
| ROS Melodic Morenia  | ![](docs\assets\melodic.jpg){width="200"} | 2018/05/23 |  Ubuntu 18.04  |
| ROS Lunar Loggerhead | ![](docs\assets\lunar.png){width="200"} | 2017/05/23 |  Ubuntu 16.04  |
|   ROS Kinetic Kame   | ![](docs\assets\kinetic.png){width="200"} | 2016/05/23 |  Ubuntu 15.10  |
|   ROS Jade Turtle    | ![](docs\assets\jade.png){width="200"} | 2015/05/23 |  Ubuntu 14.04  |
|        ......        |                            ......                            |   ......   |     ......     |
</figure>


1.  é…ç½®Ubuntuè½¯ä»¶ä»“åº“

æ‰“å¼€â€œè½¯ä»¶å’Œæ›´æ–°â€é…ç½®ä½ çš„Ubuntuè½¯ä»¶ä»“åº“ï¼ˆrepositoriesï¼‰ä»¥å…è®¸ä½¿ç”¨ â€œrestrictedâ€ã€â€œuniverseâ€ å’Œ â€œmultiverseâ€ å­˜å‚¨åº“ã€‚


<figure markdown>
  ![](docs\assets\image-20230518180247219.png){ width="500" }
</figure>


2.  è®¾ç½®sources.list

```shell
vkrobot@vkrobotï¼š~$ sudo sh -c '. /etc/lsb-release && echo "deb http://mirrors.tuna.tsinghua.edu.cn/ros/ubuntu/ `lsb_release -cs` main" > /etc/apt/sources.list.d/ros-latest.list'
```



3. è®¾ç½®å¯†é’¥

```shell
vkrobot@vkrobotï¼š~$ sudo apt-key adv --keyserver 'hkpï¼š//keyserver.ubuntu.comï¼š80' --recv-key C1CF6E31E6BADE8868B172B4F42ED6FBAB17C654
```



4. å®‰è£…

```shell
vkrobot@vkrobotï¼š~$ sudo apt update
vkrobot@vkrobotï¼š~$ sudo apt install ros-melodic-desktop-full
```



5. åˆå§‹åŒ–rosdep

```shell
vkrobot@vkrobotï¼š~$ sudo apt-get install python3-pip
vkrobot@vkrobotï¼š~$ sudo pip3 install rosdepc
vkrobot@vkrobotï¼š~$ sudo rosdepc init
vkrobot@vkrobotï¼š~$ rosdepc update
vkrobot@vkrobotï¼š~$ sudo chmod -R 777 ~/.ros/
```



6. è®¾ç½®ç¯å¢ƒ

```shell
vkrobot@vkrobotï¼š~$ echo "source /opt/ros/melodic/setup.bash" >> ~/.bashrc
vkrobot@vkrobotï¼š~$ source ~/.bashrc
```



7. æ„å»ºä¾èµ–

```shell
vkrobot@vkrobotï¼š~$ sudo apt-get install python-rosinstall python-rosinstall-generator python-wstool build-essential
```

> ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥ROSæ˜¯å¦å®‰è£…æˆåŠŸï¼š
>
> `roscore`



## 2.3 ROSçš„æ ¸å¿ƒæ¦‚å¿µ

è®¡ç®—å›¾ï¼ˆComputation Graphï¼‰æ˜¯ä¸€ä¸ªç”±ROSè¿›ç¨‹ç»„æˆçš„ç‚¹å¯¹ç‚¹ç½‘ç»œï¼Œå®ƒä»¬èƒ½å¤Ÿå…±åŒå¤„ç†æ•°æ®ã€‚ROSçš„åŸºæœ¬è®¡ç®—å›¾æ¦‚å¿µæœ‰èŠ‚ç‚¹ï¼ˆNodesï¼‰ã€ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰ã€å‚æ•°æœåŠ¡å™¨ï¼ˆParameter Serverï¼‰ã€æ¶ˆæ¯ï¼ˆMessagesï¼‰ã€æœåŠ¡ï¼ˆServicesï¼‰ã€è¯é¢˜ï¼ˆTopicsï¼‰å’Œè¢‹ï¼ˆBagsï¼‰ï¼Œå®ƒä»¬éƒ½ä»¥ä¸åŒçš„æ–¹å¼å‘å›¾ï¼ˆGraphï¼‰æä¾›æ•°æ®ã€‚

* èŠ‚ç‚¹ï¼ˆNodesï¼‰ï¼šèŠ‚ç‚¹æ˜¯ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ï¼Œå®ƒé€šè¿‡ROSæ¥ä¸å…¶ä»–èŠ‚ç‚¹è¿›è¡Œé€šä¿¡ã€‚
* ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰ï¼šROSçš„å‘½åæœåŠ¡ï¼Œä¾‹å¦‚å¸®åŠ©èŠ‚ç‚¹å‘ç°å½¼æ­¤ã€‚
* æ¶ˆæ¯ï¼ˆMessagesï¼‰ï¼šè®¢é˜…æˆ–å‘å¸ƒè¯é¢˜æ—¶æ‰€ä½¿ç”¨çš„ROSæ•°æ®ç±»å‹ã€‚
* è¯é¢˜ï¼ˆTopicsï¼‰ï¼šèŠ‚ç‚¹å¯ä»¥å°†æ¶ˆæ¯å‘å¸ƒåˆ°è¯é¢˜ï¼Œæˆ–é€šè¿‡è®¢é˜…è¯é¢˜æ¥æ¥æ”¶æ¶ˆæ¯ã€‚

> ä½¿ç”¨ `rqt_graph` å‘½ä»¤èƒ½å¤Ÿåˆ›å»ºä¸€ä¸ªæ˜¾ç¤ºå½“å‰ç³»ç»ŸROSç¨‹åºè¿è¡Œæƒ…å†µçš„åŠ¨æ€å›¾å½¢ï¼Œæ˜¾ç¤ºä¸åŒèŠ‚ç‚¹ä¹‹é—´çš„å…³ç³»

<figure markdown>
  ![http://ros.org/images/wiki/ROS_basic_concepts.png](http://ros.org/images/wiki/ROS_basic_concepts.png){ width="300" }
</figure>



### 2.3.1 èŠ‚ç‚¹ä¸ä¸»èŠ‚ç‚¹

#### èŠ‚ç‚¹ï¼ˆNodesï¼‰

èŠ‚ç‚¹å®é™…ä¸Šåªä¸è¿‡æ˜¯ROSè½¯ä»¶åŒ…ä¸­çš„ä¸€ä¸ªå¯æ‰§è¡Œæ–‡ä»¶ã€‚ROSèŠ‚ç‚¹ä½¿ç”¨ROSå®¢æˆ·ç«¯åº“ä¸å…¶ä»–èŠ‚ç‚¹é€šä¿¡ã€‚èŠ‚ç‚¹å¯ä»¥å‘å¸ƒæˆ–è®¢é˜…è¯é¢˜ï¼Œä¹Ÿå¯ä»¥æä¾›æˆ–ä½¿ç”¨æœåŠ¡ã€‚

**ç‰¹ç‚¹ï¼š**

* ä¸åŒèŠ‚ç‚¹å¯ä½¿ç”¨ä¸åŒè¯­è¨€ç¼–å†™ï¼Œåˆ†å¸ƒå¼éƒ¨ç½²åœ¨ä¸åŒçš„ä¸»æœºä¸Š
* èŠ‚ç‚¹åœ¨ç³»ç»Ÿä¸­çš„åç§°å¿…é¡»æ˜¯å”¯ä¸€çš„

> ä¾‹å¦‚ï¼Œå’±ä»¬æœ‰ä¸€ä¸ªæœºå™¨äººï¼Œå’Œä¸€ä¸ªé¥æ§å™¨ï¼Œé‚£ä¹ˆè¿™ä¸ªæœºå™¨äººå’Œé¥æ§å™¨å¼€å§‹å·¥ä½œåï¼Œå°±æ˜¯ä¸¤ä¸ªèŠ‚ç‚¹ã€‚é¥æ§å™¨èµ·åˆ°äº†ä¸‹è¾¾æŒ‡ä»¤çš„ä½œç”¨ï¼›æœºå™¨äººè´Ÿè´£ç›‘å¬é¥æ§å™¨ä¸‹è¾¾çš„æŒ‡ä»¤ï¼Œå®Œæˆç›¸åº”åŠ¨ä½œã€‚ä»è¿™é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼ŒèŠ‚ç‚¹æ˜¯ä¸€ä¸ªèƒ½æ‰§è¡Œç‰¹å®šå·¥ä½œä»» åŠ¡çš„å·¥ä½œå•å…ƒï¼Œå¹¶ä¸”èƒ½å¤Ÿç›¸äº’é€šä¿¡ï¼Œä»è€Œå®ç°ä¸€ä¸ªæœºå™¨äººç³»ç»Ÿæ•´ä½“çš„åŠŸèƒ½ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬æŠŠé¥æ§å™¨å’Œæœºå™¨äººç®€å•å®šä¹‰ä¸ºä¸¤ä¸ªèŠ‚ç‚¹ï¼Œå®é™…ä¸Šåœ¨æœºå™¨äººä¸­æ ¹æ®æ§åˆ¶å™¨ã€ä¼ æ„Ÿå™¨ã€æ‰§è¡Œæœºæ„ç­‰ä¸åŒç»„æˆæ¨¡å—ï¼Œè¿˜å¯ä»¥å°†å…¶è¿›ä¸€æ­¥ç»†åˆ†ä¸ºæ›´å¤šçš„èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ˜¯æ ¹æ®ç”¨æˆ·ç¼–å†™çš„ç¨‹åºæ¥å®šä¹‰çš„ã€‚ï¼‰

**å®¢æˆ·ç«¯åº“ï¼š**ROSå®¢æˆ·ç«¯åº“å¯ä»¥è®©ç”¨ä¸åŒç¼–ç¨‹è¯­è¨€ç¼–å†™çš„èŠ‚ç‚¹è¿›è¡Œç›¸äº’é€šä¿¡

* **rospy**ï¼š Pythonå®¢æˆ·ç«¯åº“
* **roscpp**ï¼š C++å®¢æˆ·ç«¯åº“



#### ä¸»èŠ‚ç‚¹ï¼ˆMasterï¼‰

`roscore`æ˜¯ä½ åœ¨è¿è¡Œæ‰€æœ‰ROSç¨‹åºå‰é¦–å…ˆè¦è¿è¡Œçš„å‘½ä»¤

```shell
vkrobot@vkrobotï¼š~$ roscore
```

ç„¶åä½ ä¼šçœ‹åˆ°ç±»ä¼¼ä¸‹é¢çš„è¾“å‡ºä¿¡æ¯ï¼š

```shell
... logging to ~/.ros/log/9cf88ce4-b14d-11df-8a75-00251148e8cf/roslaunch-machine_name-13039.log
Checking log directory for disk usage. This may take awhile.
Press Ctrl-C to interrupt
Done checking log file disk usage. Usage is <1GB.

started roslaunch server http://machine_nameï¼š33919/
ros_comm version 1.4.7

SUMMARY


PARAMETERS
 * /rosdistroï¼š melodic
 * /rosversionï¼š 1.14.13

NODES

auto-starting new master
process[master]ï¼š started with pid [13054]
ROS_MASTER_URI=http://machine_nameï¼š11311/

setting /run_id to 9cf88ce4-b14d-11df-8a75-00251148e8cf
process[rosout-1]ï¼š started with pid [13067]
started core service [/rosout]
```



#### ä½¿ç”¨ rosnode

`rosnode`æ˜¾ç¤ºå½“å‰æ­£åœ¨è¿è¡Œçš„ROSèŠ‚ç‚¹ä¿¡æ¯ã€‚`rosnode list`å‘½ä»¤ä¼šåˆ—å‡ºè¿™äº›æ´»åŠ¨çš„èŠ‚ç‚¹ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosnode list
/rosout
```



è¿™è¡¨ç¤ºå½“å‰åªæœ‰ä¸€ä¸ªèŠ‚ç‚¹åœ¨è¿è¡Œï¼š rosoutã€‚å› ä¸ºè¿™ä¸ªèŠ‚ç‚¹ç”¨äºæ”¶é›†å’Œè®°å½•èŠ‚ç‚¹çš„è°ƒè¯•è¾“å‡ºï¼Œæ‰€ä»¥å®ƒæ€»æ˜¯åœ¨è¿è¡Œçš„ã€‚

`rosnode info`å‘½ä»¤å¯ä»¥è¿”å›æŸä¸ªæŒ‡å®šèŠ‚ç‚¹çš„ä¿¡æ¯

```shell
vkrobot@vkrobotï¼š~$ rosnode info /rosout
--------------------------------------------------------------------
Node [/rosout]
Publicationsï¼š
 * /rosout_agg [rosgraph_msgs/Log]

Subscriptionsï¼š
 * /rosout [unknown type]

Servicesï¼š
 * /rosout/get_loggers
 * /rosout/set_logger_level

contacting node http://machine_nameï¼š54614/ ...
Pidï¼š 5092
```



#### ä½¿ç”¨ rosrun

rosrunå¯ä»¥è®©ä½ ç”¨åŒ…åç›´æ¥è¿è¡Œè½¯ä»¶åŒ…å†…çš„èŠ‚ç‚¹ï¼ˆè€Œä¸éœ€è¦çŸ¥é“åŒ…çš„è·¯å¾„ï¼‰

ç”¨æ³•ï¼š

`rosrun [package_name] [node_name]`

åœ¨ä¸€ä¸ªæ–°ç»ˆç«¯ä¸­ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosrun turtlesim turtlesim_node
```


<figure markdown>
  ![turtlesim](docs\assets\turtlesim.png)
</figure>

> **æ³¨æ„**ï¼šæ­¤å¤„çš„ä¹Œé¾Ÿå¯èƒ½å’Œä½ turtlesimçª—å£ä¸Šçš„ä¸åŒã€‚



#### å¤ä¹ 

æœ¬èŠ‚æ‰€æ¶‰åŠçš„å†…å®¹ï¼š

* roscore = ros + coreï¼šä¸»èŠ‚ç‚¹ï¼ˆä¸ºROSæä¾›å‘½åæœåŠ¡ï¼‰
* rosnode = ros + nodeï¼šè·å–èŠ‚ç‚¹ä¿¡æ¯çš„ROSå·¥å…·
* rosrun = ros + runï¼šè¿è¡Œç»™å®šçš„è½¯ä»¶åŒ…ä¸­çš„èŠ‚ç‚¹



### 2.3.2 è¯é¢˜é€šä¿¡

<figure markdown>
  ![img](https://nwzimg.wezhan.cn/contents/sitefiles2026/10130166/images/10061327.png){width="700"}
</figure>

é¦–å…ˆç¡®ä¿`roscore`ä¸`turtlesim`æ­£åœ¨è¿è¡Œ

æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosrun turtlesim turtle_teleop_key
Reading from keyboard
---------------------------
Use arrow keys to move the turtle.
```

> ç°åœ¨ä½ å¯ä»¥ä½¿ç”¨é”®ç›˜ä¸Šçš„æ–¹å‘é”®æ¥æ§åˆ¶turtleè¿åŠ¨äº†ã€‚å¦‚æœä¸èƒ½æ§åˆ¶ï¼Œè¯·é€‰ä¸­turtle_teleop_keyçš„ç»ˆç«¯çª—å£ä»¥ç¡®ä¿æŒ‰é”®è¾“å…¥èƒ½å¤Ÿè¢«æ•è·ã€‚

<figure markdown>
  ![turtle_key](docs\assets\turtle_key.png)
</figure>

æ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯ï¼š

```shell
vkrobot@vkrobotï¼š~$ rqt_graph
```

ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªçª—å£ï¼š

<figure markdown>
  ![rqt_graph_turtle_key2](docs\assets\rqt_graph_turtle_key2.png){width="600"}
</figure>


#### ä½¿ç”¨ rostopic

`rostopic`å‘½ä»¤å·¥å…·èƒ½è®©ä½ è·å–ROSè¯é¢˜çš„ä¿¡æ¯ã€‚

ä½ å¯ä»¥ä½¿ç”¨å¸®åŠ©é€‰é¡¹æŸ¥çœ‹å¯ç”¨çš„`rostopic`çš„å­å‘½ä»¤

```shell
vkrobot@vkrobotï¼š~$ rostopic --help
rostopic is a command-line tool for printing information about ROS Topics.

Commandsï¼š
        rostopic bw     display bandwidth used by topic
        rostopic delay  display delay of topic from timestamp in header
        rostopic echo   print messages to screen
        rostopic find   find topics by type
        rostopic hz     display publishing rate of topic    
        rostopic info   print information about active topic
        rostopic list   list active topics
        rostopic pub    publish data to topic
        rostopic type   print topic or field type

Type rostopic <command> -h for more detailed usage, e.g. 'rostopic echo -h'
```



##### rostopic echo

`rostopic echo`å¯ä»¥æ˜¾ç¤ºåœ¨æŸä¸ªè¯é¢˜ä¸Šå‘å¸ƒçš„æ•°æ®ã€‚

ç”¨æ³•ï¼š`rostopic echo [topic]`

```shell
vkrobot@vkrobotï¼š~$ rostopic echo /turtle1/cmd_vel
```

> ä½ å¯èƒ½ä¼šçœ‹åˆ°ä»€ä¹ˆéƒ½æ²¡å‘ç”Ÿï¼Œå› ä¸ºç°åœ¨è¿˜æ²¡æœ‰æ•°æ®è¢«å‘å¸ƒåˆ°è¯¥è¯é¢˜ä¸Šã€‚å¯ä»¥é€šè¿‡æŒ‰ä¸‹é”®ç›˜æ–¹å‘é”®è®©`turtle_teleop_key`èŠ‚ç‚¹å‘å¸ƒæ•°æ®ã€‚è®°å¾—å¦‚æœä¸èƒ½æ§åˆ¶ä¹Œé¾Ÿï¼Œè¯·é€‰ä¸­turtle_teleop_keyçš„ç»ˆç«¯çª—å£ä»¥ç¡®ä¿æŒ‰é”®è¾“å…¥èƒ½å¤Ÿè¢«æ•è·ã€‚



##### rostopic list

`rostopic list`èƒ½å¤Ÿåˆ—å‡ºå½“å‰å·²è¢«è®¢é˜…å’Œå‘å¸ƒçš„æ‰€æœ‰è¯é¢˜ã€‚

```shell
vkrobot@vkrobotï¼š~$ rostopic list -v

Published topicsï¼š
 * /turtle1/color_sensor [turtlesim/Color] 1 publisher
 * /turtle1/cmd_vel [geometry_msgs/Twist] 1 publisher
 * /rosout [rosgraph_msgs/Log] 2 publishers
 * /rosout_agg [rosgraph_msgs/Log] 1 publisher
 * /turtle1/pose [turtlesim/Pose] 1 publisher

Subscribed topicsï¼š
 * /turtle1/cmd_vel [geometry_msgs/Twist] 1 subscriber
 * /rosout [rosgraph_msgs/Log] 1 subscriber
```

> -v å‚æ•°å¯ä»¥åˆ—å‡ºæ‰€æœ‰å‘å¸ƒå’Œè®¢é˜…çš„è¯é¢˜åŠå…¶ç±»å‹çš„è¯¦ç»†ä¿¡æ¯



#### æ¶ˆæ¯ï¼ˆMessagesï¼‰

è¯é¢˜çš„é€šä¿¡æ˜¯é€šè¿‡èŠ‚ç‚¹é—´å‘é€ROSæ¶ˆæ¯å®ç°çš„ã€‚ä¸ºäº†ä½¿å‘å¸ƒè€…ï¼ˆ`turtle_teleop_key`ï¼‰å’Œè®¢é˜…è€…ï¼ˆ`turtulesim_node`ï¼‰è¿›è¡Œé€šä¿¡ï¼Œå‘å¸ƒè€…å’Œè®¢é˜…è€…å¿…é¡»å‘é€å’Œæ¥æ”¶ç›¸åŒç±»å‹çš„æ¶ˆæ¯ã€‚è¿™æ„å‘³ç€è¯é¢˜çš„ç±»å‹æ˜¯ç”±å‘å¸ƒåœ¨å®ƒä¸Šé¢æ¶ˆæ¯çš„ç±»å‹å†³å®šçš„ã€‚ä½¿ç”¨`rostopic type`å‘½ä»¤å¯ä»¥æŸ¥çœ‹å‘å¸ƒåœ¨è¯é¢˜ä¸Šçš„æ¶ˆæ¯çš„ç±»å‹ã€‚

##### ä½¿ç”¨ rosmsg

`rosmsg`å¯ä»¥æ˜¾ç¤ºæ¶ˆæ¯ç±»å‹çš„å…·ä½“ä¿¡æ¯

ç”¨æ³•ï¼š`rosmsg <command> <msg_type>`

```shell
vkrobot@vkrobotï¼š~$ rosmsg show geometry_msgs/Twist
geometry_msgs/Vector3 linear
  float64 x
  float64 y
  float64 z
geometry_msgs/Vector3 angular
  float64 x
  float64 y
  float64 z
```

> å¯ä»¥ä½¿ç”¨ `rostopic type [topic]`å‘½ä»¤æŸ¥çœ‹æŒ‡å®šè¯é¢˜çš„æ¶ˆæ¯ç±»å‹ï¼Œç°åœ¨æˆ‘ä»¬å·²ç»çŸ¥é“äº†turtlesimèŠ‚ç‚¹æƒ³è¦çš„æ¶ˆæ¯ç±»å‹ï¼Œç„¶åå°±å¯ä»¥å‘å¸ƒå‘½ä»¤ç»™turtleäº†



##### ä½¿ç”¨ rostopic å·¥å…·å‘å¸ƒæ¶ˆæ¯

`rostopic pub`å¯ä»¥æŠŠæ•°æ®å‘å¸ƒåˆ°å½“å‰æŸä¸ªæ­£åœ¨å¹¿æ’­çš„è¯é¢˜ä¸Šã€‚

ç”¨æ³•ï¼š`rostopic pub [topic] [msg_type] [args]`

```shell
vkrobot@vkrobotï¼š~$ rostopic pub -r 10 /turtle1/cmd_vel geometry_msgs/Twist "linerï¼š
  xï¼š 2.0
  yï¼š 0.0
  zï¼š 0.0
angularï¼š
  xï¼š 0.0
  yï¼š 0.0
  zï¼š 1.8"
```

>  å¯ä»¥å†æ¬¡ä½¿ç”¨`rqt_graph`å‘½ä»¤æŸ¥çœ‹å½“å‰çš„è®¡ç®—å›¾



#### å¤ä¹ 

æœ¬èŠ‚æ‰€æ¶‰åŠçš„å†…å®¹ï¼š

* rqt_graphï¼šè®¡ç®—å›¾å¯è§†åŒ–å·¥å…·
* rostopic = ros + topicï¼šè¯é¢˜ç®¡ç†å·¥å…·
* rosmsg = ros + msgï¼šæ¶ˆæ¯ç®¡ç†å·¥å…·

### 2.3.3 æœåŠ¡é€šä¿¡

æœåŠ¡ï¼ˆServicesï¼‰æ˜¯èŠ‚ç‚¹ä¹‹é—´é€šè®¯çš„å¦ä¸€ç§æ–¹å¼ã€‚æœåŠ¡å…è®¸èŠ‚ç‚¹å‘é€ä¸€ä¸ªè¯·æ±‚ï¼ˆrequestï¼‰å¹¶è·å¾—ä¸€ä¸ªå“åº”ï¼ˆresponseï¼‰ã€‚

<figure markdown>
  ![img](https://nwzimg.wezhan.cn/contents/sitefiles2026/10130166/images/10062609.png){width="700"}
</figure>

#### ä½¿ç”¨ rosservice

rosserviceå¯ä»¥å¾ˆå®¹æ˜“åœ°é€šè¿‡æœåŠ¡é™„åŠ åˆ°ROSå®¢æˆ·ç«¯/æœåŠ¡å™¨æ¡†æ¶ä¸Šã€‚rosserviceæœ‰è®¸å¤šå¯ç”¨äºæœåŠ¡çš„å‘½ä»¤

**ç”¨æ³•ï¼š**

* `rosservice list`ï¼šè¾“å‡ºæ´»è·ƒæœåŠ¡çš„ä¿¡æ¯
* `rosservice type`ï¼šè¾“å‡ºæœåŠ¡çš„ç±»å‹
* `rosservice call`ï¼šç”¨ç»™å®šçš„å‚æ•°è°ƒç”¨æœåŠ¡

* ...

1. `rosservice list`

ä½¿ç”¨listå‘½ä»¤æ˜¾ç¤ºturtlesimèŠ‚ç‚¹æä¾›çš„æœåŠ¡

```shell
vkrobot@vkrobotï¼š~$ rosservice list
/clear
/kill
/reset
/rosout/get_loggers
/rosout/set_logger_level
/spawn
/teleop_turtle/get_loggers
/teleop_turtle/set_logger_level
/turtle1/set_pen
/turtle1/teleport_absolute
/turtle1/teleport_relative
/turtlesim/get_loggers
/turtlesim/set_logger_level
```



2. `rosservice type`

**ç”¨æ³•ï¼š**`rosservice type [service]`

æ¥çœ‹çœ‹clearæœåŠ¡çš„ç±»å‹ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosservice type /clear
std_srvs/Empty
```

> æœåŠ¡çš„ç±»å‹ä¸ºEmptyï¼ˆç©ºï¼‰ï¼Œè¿™è¡¨æ˜è°ƒç”¨è¿™ä¸ªæœåŠ¡æ—¶ä¸éœ€è¦å‚æ•°



3. `rosservice call`

**ç”¨æ³•ï¼š**`rosservice call [service] [args]`

```shell
vkrobot@vkrobotï¼š~$ rosservice call /clear
```


<figure markdown>
  ![ROS/Tutorials/UnderstandingServicesParams/turtlesim.png](http://wiki.ros.org/ROS/Tutorials/UnderstandingServicesParams?action=AttachFile&do=get&target=turtlesim.png)
</figure>



å†è®©æˆ‘ä»¬çœ‹çœ‹æœåŠ¡å…·æœ‰å‚æ•°çš„æƒ…å†µã€‚æŸ¥çœ‹spawnï¼ˆäº§åµï¼‰æœåŠ¡çš„ä¿¡æ¯ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosservice type /spawn | rossrv show
float32 x
float32 y
float32 theta
string name
---
string name
```

> è¿™ä¸ªæœåŠ¡èƒ½è®©æˆ‘ä»¬å¯ä»¥åœ¨ç»™å®šçš„ä½ç½®å’Œè§’åº¦ç”Ÿæˆä¸€åªæ–°çš„ä¹Œé¾Ÿã€‚



```shell
vkrobot@vkrobotï¼š~$ rosservice call /spawn "xï¼š 2.0
yï¼š 2.0
thetaï¼š 0.2
nameï¼š ''"
```

<figure markdown>
  ![ROS/Tutorials/UnderstandingServicesParams/turtle(service).png](http://wiki.ros.org/ROS/Tutorials/UnderstandingServicesParams?action=AttachFile&do=get&target=turtle%28service%29.png)
</figure>


#### å¤ä¹ 

æœ¬èŠ‚æ‰€æ¶‰åŠçš„å†…å®¹ï¼š

* rosservice = ros + serviceï¼šæœåŠ¡ç®¡ç†å·¥å…·
* rossrv = ros + srvï¼šæœåŠ¡æ•°æ®ç®¡ç†å·¥å…·



### 2.3.4 å‚æ•°æœåŠ¡å™¨

<figure markdown>
  ![img](https://nwzimg.wezhan.cn/contents/sitefiles2026/10130166/images/10062651.png){width="700"}
</figure>

#### ä½¿ç”¨ rosparam

`rosparam`èƒ½è®©æˆ‘ä»¬åœ¨ROSå‚æ•°æœåŠ¡å™¨ï¼ˆParameter Serverï¼‰ä¸Šå­˜å‚¨å’Œæ“ä½œæ•°æ®ã€‚å‚æ•°æœåŠ¡å™¨èƒ½å¤Ÿå­˜å‚¨æ•´å‹ï¼ˆintegerï¼‰ã€æµ®ç‚¹ï¼ˆfloatï¼‰ã€å¸ƒå°”ï¼ˆbooleanï¼‰ã€å­—å…¸ï¼ˆdictionariesï¼‰å’Œåˆ—è¡¨ï¼ˆlistï¼‰ç­‰æ•°æ®ç±»å‹ã€‚



**ç”¨æ³•ï¼š**

* `rosparam set`ï¼šè®¾ç½®å‚æ•°
* `rosparam get`ï¼šè·å–å‚æ•°
* `rosparam load`ï¼šä»æ–‡ä»¶ä¸­åŠ è½½å‚æ•°
* `rosparam dump`ï¼šå‘æ–‡ä»¶ä¸­è½¬å‚¨å‚æ•°
* `rosparam delete`ï¼šåˆ é™¤å‚æ•°
* `rosparam list`ï¼šåˆ—å‡ºå‚æ•°å



1. `rosparam list`

```shell
vkrobot@vkrobotï¼š~$ rosparam list
/rosdistro
/roslaunch/uris/host_nxt__43407
/rosversion
/run_id
/turtlesim/background_b
/turtlesim/background_g
/turtlesim/background_r
```



2. `rosparam set` & `rosparam get`

**ç”¨æ³•ï¼š**`rosparam set [param_name]`

   	 	`rosparam get [param_name]`

```shell
vkrobot@vkrobotï¼š~$ rosparam get /turtlesim/background_r
69
vkrobot@vkrobotï¼š~$ rosparam set /turtlesim/background_r 150
```

> è¿™é‡Œè™½ç„¶ä¿®æ”¹äº†å‚æ•°çš„å€¼ï¼Œä½†æ˜¯æµ·é¾Ÿçª—å£çš„èƒŒæ™¯é¢œè‰²å¹¶æ²¡æœ‰å˜åŒ–ï¼Œæˆ‘ä»¬è¿˜éœ€è¦è°ƒç”¨clearæœåŠ¡ä½¿å‚æ•°ä¿®æ”¹èƒ½ç”Ÿæ•ˆ



```shell
vkrobot@vkrobotï¼š~$ rosservice call /clear
```

<figure markdown>
  ![ROS/Tutorials/UnderstandingServicesParams/turtle(param).png](http://wiki.ros.org/ROS/Tutorials/UnderstandingServicesParams?action=AttachFile&do=get&target=turtle%28param%29.png)
</figure>


ä¹Ÿå¯ä»¥ç”¨`rosparam get /`æ¥è·å–å‚æ•°æœåŠ¡å™¨ä¸­æ‰€æœ‰çš„å‚æ•°å†…å®¹ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosparam get /
rosdistroï¼š 'melodic

  '
roslaunchï¼š
  urisï¼š(host_localhost__46785ï¼š 'http://localhostï¼š46785/')
rosversionï¼š '1.14.3

  '
run_idï¼š 7ef687d8-9ab7-11ea-b692-fcaa1494dbf9
turtlesimï¼š(background_bï¼š 255ï¼Œbackground_gï¼š 86ï¼Œbackground_rï¼š 69)
```



3. `rosparam dump` & `rosparam load`

**ç”¨æ³•ï¼š**`rosparam dump [file_name] [namespace]`

â€‹            `rosparam load [file_name] [namespace]`

```shell
vkrobot@vkrobotï¼š~$ rosparam dump params.yaml
```

> é‡å¯`roscore`ä¸`turtlesim`åï¼Œå¯ä»¥é‡æ–°åŠ è½½èƒŒæ™¯é¢œè‰²å‚æ•°

```shell
vkrobot@vkrobotï¼š~$ roscore
vkrobot@vkrobotï¼š~$ rosrun turtlesim turtlesim_node
vkrobot@vkrobotï¼š~$ rosparam load param.yaml
vkrobot@vkrobotï¼š~$ rosservice call /clear
```



#### å¤ä¹ 

æœ¬èŠ‚æ‰€æ¶‰åŠçš„å†…å®¹ï¼š

* rosparam = ros + paramï¼šå‚æ•°ç®¡ç†å·¥å…·



### 2.3.5 æ–‡ä»¶ç³»ç»Ÿ

<figure markdown>
![img](https://nwzimg.wezhan.cn/contents/sitefiles2026/10130166/images/10063216.png){width="700"}
</figure>

ç¨‹åºä»£ç æ•£è½åœ¨è®¸å¤šROSåŒ…ä¸­ã€‚ä½¿ç”¨Linuxå†…ç½®å‘½ä»¤è¡Œå·¥å…·ï¼ˆå¦‚`ls`å’Œ`cd`ï¼‰æ¥è¿›è¡ŒæŸ¥æ‰¾å’Œå¯¼èˆªå¯èƒ½éå¸¸ç¹çï¼Œå› æ­¤ROSæä¾›äº†ä¸“é—¨çš„å‘½ä»¤å·¥å…·æ¥ç®€åŒ–è¿™äº›æ“ä½œ



#### ä½¿ç”¨ rospack

`rospack`å…è®¸ç”¨æˆ·è·å–åŠŸèƒ½åŒ…çš„æœ‰å…³ä¿¡æ¯

**ç”¨æ³•ï¼š**`rospack <command> [option] [package_name]`

```shell
vkrobot@vkrobotï¼š~$ rospack find rospy
/opt/ros/melodic/share/rospy
```



#### ä½¿ç”¨ roscd

`roscd`å…è®¸ç”¨æˆ·ç›´æ¥åˆ‡æ¢ç›®å½•åˆ°æŸä¸ªåŠŸèƒ½åŒ…æˆ–å…ƒåŠŸèƒ½åŒ…ä¸­

**ç”¨æ³•ï¼š**`roscd [locationname[/subdir]]`

```shell
vkrobot@vkrobotï¼š~$ roscd rospy
vkrobot@vkrobotï¼š/opt/ros/melodic/share/rospy$ pwd
/opt/ros/melodic/share/rospy
```



#### ä½¿ç”¨ rosls

`rosls`å…è®¸ç”¨æˆ·ç›´æ¥æŒ‰åŠŸèƒ½åŒ…çš„åç§°æ‰§è¡Œ`ls`å‘½ä»¤ï¼ˆè€Œä¸å¿…è¾“å…¥ç»å¯¹è·¯å¾„ï¼‰

**ç”¨æ³•ï¼š**`rosls [locationname[/subdir]]`

```shell
vkrobot@vkrobotï¼š~$ rosls rospy
cmake package.xml rosbuild
```



#### Tabè¡¥å…¨

æ€»æ˜¯è¾“å…¥å®Œæ•´çš„è½¯ä»¶åŒ…åç§°æ„Ÿè§‰æ¯”è¾ƒç¹çã€‚åœ¨ä¹‹å‰çš„ä¾‹å­ä¸­ï¼Œ`turtlesim turtlesim_node`æ˜¯ä¸ªç›¸å½“é•¿çš„åç§°ã€‚å¹¸è¿çš„æ˜¯ï¼Œä¸€äº›ROSå·¥å…·æ”¯æŒTABè¡¥å…¨çš„åŠŸèƒ½ã€‚

```shell
vkrobot@vkrobotï¼š~$ roscd turtles<<<æŒ‰TABé”®>>>
```

> å½“æŒ‰**TAB**é”®åï¼Œå‘½ä»¤è¡Œåº”è¯¥ä¼šè‡ªåŠ¨è¡¥å……å‰©ä½™éƒ¨åˆ†ï¼š



#### å¤ä¹ 

æœ¬èŠ‚æ‰€æ¶‰åŠçš„å†…å®¹ï¼š

* rospack = ros + pack(age)ï¼šæä¾›ä¸ROSåŒ…ç›¸å…³çš„ä¿¡æ¯
* roscd = ros + cdï¼šå°†ç›®å½•æ›´æ”¹ä¸ºROSåŒ…æˆ–å †æ ˆ
* rosls = ros + lsï¼šåˆ—å‡ºROSåŒ…ä¸­çš„æ–‡ä»¶



## 2.4 å·¥ä½œç©ºé—´ä¸åŠŸèƒ½åŒ…

catkinæ˜¯ROSå®˜æ–¹æŒ‡å®šçš„ç¼–è¯‘ç³»ç»Ÿï¼Œä¸€ä¸ªåŒ…è¦æƒ³ç§°ä¸ºcatkinåŠŸèƒ½åŒ…ï¼Œå¿…é¡»ç¬¦åˆä»¥ä¸‹è¦æ±‚ï¼š

- è¿™ä¸ªåŒ…å¿…é¡»æœ‰ä¸€ä¸ªç¬¦åˆcatkinè§„èŒƒçš„package.xmlæ–‡ä»¶
  - è¿™ä¸ª`package.xml`æ–‡ä»¶æä¾›æœ‰å…³è¯¥åŠŸèƒ½åŒ…çš„å…ƒä¿¡æ¯
- è¿™ä¸ªåŒ…å¿…é¡»æœ‰ä¸€ä¸ªcatkinç‰ˆæœ¬çš„CMakeLists.txtæ–‡ä»¶
  - å¦‚æœå®ƒæ˜¯ä¸ªCatkinå…ƒåŒ…çš„è¯ï¼Œåˆ™éœ€è¦æœ‰ä¸€ä¸ª`CMakeList.txt`æ–‡ä»¶çš„ç›¸å…³æ ·æ¿
- æ¯ä¸ªåŒ…å¿…é¡»æœ‰è‡ªå·±çš„ç›®å½•
  - è¿™æ„å‘³ç€åœ¨åŒä¸€ä¸ªç›®å½•ä¸‹ä¸èƒ½æœ‰åµŒå¥—çš„æˆ–è€…å¤šä¸ªåŠŸèƒ½åŒ…å­˜åœ¨

æœ€ç®€å•çš„åŠŸèƒ½åŒ…çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š

```shell
my_package/
  CMakeLists.txt
  package.xml
```



å¼€å‘catkinåŠŸèƒ½åŒ…çš„æ¨èæ–¹æ³•æ˜¯ä½¿ç”¨catkinå·¥ä½œç©ºé—´ï¼Œä¸€ä¸ªç®€å•çš„å·¥ä½œç©ºé—´å¦‚ä¸‹æ‰€ç¤ºï¼š

```shell
workspace_folder/         -- WORKSPACE
  build/                  -- BUILD SPACE
  devel/                  -- DEVELOPMENT SPACE
    setup.bash
    ...
  src/                   -- SOURCE SPACE
    CMakeLists.txt       -- 'Toplevel' CMake file
    package_1/
      CMakeLists.txt     -- CMakeLists.txt file for package_1
      package.xml        -- Package manifest for package_1
    ...
    package_n/
      CMakeLists.txt     -- CMakeLists.txt file for package_n
      package.xml        -- Package manifest for package_n
```



### 2.4.1 åˆ›å»ºå·¥ä½œç©ºé—´

ä¸‹é¢æˆ‘ä»¬å¼€å§‹åˆ›å»ºå’Œæ„å»ºä¸€ä¸ªcatkinå·¥ä½œç©ºé—´

```shell
vkrobot@vkrobotï¼š~$ mkdir -p ~/catkin_ws/src
vkrobot@vkrobotï¼š~$ cd ~/catkin_ws
vkrobot@vkrobotï¼š~/catkin_ws$ catkin_make #ç¼–è¯‘
vkrobot@vkrobotï¼š~/catkin_ws$ source devel/setup.bash #è®¾ç½®ç¯å¢ƒå˜é‡
vkrobot@vkrobotï¼š~/catkin_ws$ echo $ROS_PACKAGE_PATH  #æ£€æŸ¥ç¯å¢ƒå˜é‡
/home/vkrobot/catkin_ws/srcï¼š/opt/ros/melodic/share
```

 

### 2.4.2 åˆ›å»ºåŠŸèƒ½åŒ…

`catkin_create_pkg`æ˜¯ROSæä¾›çš„åŠŸèƒ½åŒ…åˆ›å»ºå·¥å…·

**ç”¨æ³•ï¼š**`catkin_create_pkg <package_name> [depend1] [depend2]`



ä¸‹é¢æˆ‘ä»¬å¼€å§‹åˆ›å»ºä¸€ä¸ªåŠŸèƒ½åŒ…ï¼š

```shell
vkrobot@vkrobotï¼š~$ cd ~/catkin_ws/src
vkrobot@vkrobotï¼š~/catkin_ws/src$ catkin_create_pkg vkrobot_tutorials std_msgs rospy roscpp
vkrobot@vkrobotï¼š~/catkin_ws/src$ cd ..
vkrobot@vkrobotï¼š~/catkin_ws$ catkin_make  #é‡æ–°ç¼–è¯‘
vkrobot@vkrobotï¼š~/catkin_ws$ source devel/setup.bash #è®¾ç½®ç¯å¢ƒå˜é‡
vkrobot@vkrobotï¼š~/catkin_ws$ echo $ROS_PACKAGE_PATH  #æ£€æŸ¥ç¯å¢ƒå˜é‡
/home/vkrobot/catkin_ws/srcï¼š/opt/ros/melodic/share
```

> ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æ·»åŠ å·¥ä½œç©ºé—´çš„ç¯å¢ƒå˜é‡ä»¥ä¿æ­£æ¯æ¬¡æ‰“å¼€æ–°ç»ˆç«¯éƒ½èƒ½è‡ªåŠ¨è®¾ç½®ç¯å¢ƒå˜é‡
>
> `echo "source /home/<ç”¨æˆ·å>/<å·¥ä½œç©ºé—´åç§°>/devel/setup.bash" >> ~/.bashrc`



### 2.4.3 VScodeé›†æˆå¼€å‘ç¯å¢ƒæ­å»º

**1.ä¸‹è½½**

vscode ä¸‹è½½ï¼š[Visual Studio Code Download](https://code.visualstudio.com/download)

<figure markdown>
  ![image-20230516180239078](docs\assets\image-20230516180239078.png)
</figure>

**2.å®‰è£…**

`sudo dpkg -i xxx.deb`

**3.å®‰è£…æ’ä»¶**

<figure markdown>
  ![image-20230516180124455](docs\assets\image-20230516180124455.png)
</figure>


## 2.5 è¯é¢˜é€šä¿¡


<figure markdown>
  ![image-20230425152553540](docs\assets\image-20230425152553540.png){width="600"}
</figure>


### 2.5.1 å‘å¸ƒè€…èŠ‚ç‚¹ç¼–ç¨‹å®ç°

```shell
vkrobot@vkrobotï¼š~$ roscd vkrobot_tutorials
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials$ mkdir scripts
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials$ cd scripts
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ touch talker.py
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x talker.py  #æ·»åŠ å¯æ‰§è¡Œæƒé™
```



ç¼–è¾‘talker.pyæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```python
#!/usr/bin/env python3
#æ¯ä¸ªPython ROSèŠ‚ç‚¹çš„æœ€å¼€å¤´éƒ½æœ‰è¿™ä¸ªå£°æ˜

import rospy  #å¦‚æœè¦ä½¿ç”¨pythonç¼–å†™ROSèŠ‚ç‚¹ï¼Œéƒ½éœ€è¦å¯¼å…¥rospy
from std_msgs.msg import String  #å¯¼å…¥std_msgs/Stringæ¶ˆæ¯ç±»å‹æ¥å‘å¸ƒå­—ç¬¦ä¸²æ¶ˆæ¯

def talker()ï¼š
    #å‘ROS Masteræ³¨å†ŒèŠ‚ç‚¹ä¿¡æ¯ï¼Œå‚æ•°åŒ…æ‹¬ï¼ˆè¯é¢˜åç§°ï¼Œæ¶ˆæ¯ç±»å‹ï¼Œé˜Ÿåˆ—é•¿åº¦ï¼‰
    pub = rospy.Publisher('chatter', String, queue_size=10)
    #åˆå§‹åŒ–ROSèŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèŠ‚ç‚¹åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼šåœ¨åç§°æœ«å°¾æ·»åŠ éšæœºæ•°ï¼Œä»¥ç¡®ä¿èŠ‚ç‚¹å…·æœ‰å”¯ä¸€çš„åç§°
    rospy.init_node('talker', anonymous=True)
    #åˆ›å»ºä¸€ä¸ªRateå¯¹è±¡ï¼Œä¼ å…¥å‚æ•°10è¡¨ç¤ºå¸Œæœ›çš„å¾ªç¯é€Ÿç‡ä¸º10Hz
    rate = rospy.Rate(10)
    while not rospy.is_shutdown()ï¼š
        #å°è£…éœ€è¦å‘å¸ƒçš„æ¶ˆæ¯æ•°æ®
        hello_str = String()
        hello_str.data = "hello world %s" % rospy.get_time()
        #å‘å¸ƒå°è£…å¥½çš„æ¶ˆæ¯æ•°æ®
        pub.publish(hello_str)
        #åœ¨å¾ªç¯ä¸­ä½¿ç”¨rate.sleep()ï¼Œå®ƒå¯ä»¥ç”¨åˆšåˆšå¥½çš„ç¡çœ æ—¶é—´æ¥ç»´æŒæœŸæœ›çš„å¾ªç¯é€Ÿç‡
        rate.sleep()

if __name__  '__main__'ï¼š
    tryï¼š
        talker()
    except rospy.ROSInterruptExceptionï¼š  #æ•è·ç¨‹åºå¼‚å¸¸
        pass
```



è¿è¡ŒtalkerèŠ‚ç‚¹ï¼š

```shell
vkrobot@vkrobotï¼š~$ roscore #å…ˆå¯åŠ¨ROS Master
vkrobot@vkrobotï¼š~$ rosrun vkrobot_tutorials talker.py
```



è¿è¡ŒæˆåŠŸåï¼Œæ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯è®¢é˜…chatterè¯é¢˜æ¥æ”¶æ¶ˆæ¯ï¼š

```shell
vkrobot@vkrobotï¼š~$ rostopic echo /chatter
dataï¼š "hello world 1682410011.24"
---
dataï¼š "hello world 1682410011.34"
......
```



### 2.5.2 è®¢é˜…è€…èŠ‚ç‚¹ç¼–ç¨‹å®ç°

```shell
vkrobot@vkrobotï¼š~$ roscd vkrobot_tutorials/scripts
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ touch listener.py
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x listener.py  #æ·»åŠ å¯æ‰§è¡Œæƒé™
```



ç¼–è¾‘listener.pyæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```python
#!/usr/bin/env python3
#æ¯ä¸ªPython ROSèŠ‚ç‚¹çš„æœ€å¼€å¤´éƒ½æœ‰è¿™ä¸ªå£°æ˜

import rospy  #å¦‚æœè¦ä½¿ç”¨pythonç¼–å†™ROSèŠ‚ç‚¹ï¼Œéƒ½éœ€è¦å¯¼å…¥rospy
from std_msgs.msg import String  #å¯¼å…¥std_msgs/Stringæ¶ˆæ¯ç±»å‹å®šä¹‰éœ€è¦æ¥æ”¶çš„æ¶ˆæ¯ç±»å‹

#å›è°ƒå‡½æ•°
def callback(data)ï¼š
    #å‘ç»ˆç«¯è¾“å‡ºæ—¥å¿—ä¿¡æ¯
    rospy.loginfo(rospy.get_caller_id() + " I heard %s", data.data)
    
def listener()ï¼š
    #åˆå§‹åŒ–ROSèŠ‚ç‚¹ï¼Œç¬¬ä¸€ä¸ªå‚æ•°ä¸ºèŠ‚ç‚¹åç§°ï¼Œç¬¬äºŒä¸ªå‚æ•°ä¼šåœ¨åç§°æœ«å°¾æ·»åŠ éšæœºæ•°ï¼Œä»¥ç¡®ä¿èŠ‚ç‚¹å…·æœ‰å”¯ä¸€çš„åç§°
    rospy.init_node('listener', anonymous=True)
    #å‘ROS Masteræ³¨å†ŒèŠ‚ç‚¹ä¿¡æ¯ï¼Œå‚æ•°åŒ…æ‹¬ï¼ˆè¯é¢˜åç§°ï¼Œæ¶ˆæ¯ç±»å‹ï¼Œå›è°ƒå‡½æ•°ï¼‰
    rospy.Subscriber("chatter", String, callback)
    #é˜»å¡å¾ªç¯ï¼Œç­‰å¾…æ¶ˆæ¯ä¼ é€’ï¼Œä¸€æ—¦æ¥æ”¶åˆ°æ¶ˆæ¯åˆ™è¿›å…¥å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†
    rospy.spin()

if __name__  '__main__'ï¼š
    listener()
```



è¿è¡ŒlistenerèŠ‚ç‚¹ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosrun vkrobot_tutorials listener.py
[INFO] [1314931969.258941] /listener_17657_1314931968795 I heard hello world 1314931969.26
[INFO] [1314931970.262246] /listener_17657_1314931968795 I heard hello world 1314931970.26
......
```

> âš âš âš ç¡®ä¿ROS Masterä¸talkerèŠ‚ç‚¹å·²å¯åŠ¨



### 2.5.3 è‡ªå®šä¹‰æ¶ˆæ¯ç±»å‹

ROSæœ¬èº«æä¾›äº†è®¸å¤šä¸åŒæ¶ˆæ¯ç±»å‹çš„åŠŸèƒ½åŒ…ï¼Œå¦‚ï¼šstd_msgsã€geometry_msgsã€sensor_msgsç­‰ï¼Œå¯ä»¥æ»¡è¶³ä¸€èˆ¬åœºæ™¯çš„ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨å¾ˆå¤šæƒ…å†µä¸‹ç”¨æˆ·ä¾ç„¶éœ€è¦é’ˆå¯¹å…·ä½“çš„éœ€æ±‚å®šä¹‰ç‰¹å®šçš„æ¶ˆæ¯ç±»å‹

- msgï¼ˆæ¶ˆæ¯ï¼‰ï¼šmsgæ–‡ä»¶å°±æ˜¯æ–‡æœ¬æ–‡ä»¶ï¼Œç”¨äºæè¿°ROSæ¶ˆæ¯çš„å­—æ®µã€‚å®ƒä»¬ç”¨äºä¸ºä¸åŒç¼–ç¨‹è¯­è¨€ç¼–å†™çš„æ¶ˆæ¯ç”Ÿæˆæºä»£ç 

```shell
vkrobot@vkrobotï¼š~$ rosmsg show std_msgs/String
string data
```



msgæ–‡ä»¶å­˜æ”¾åœ¨è½¯ä»¶åŒ…çš„`msg`ç›®å½•ä¸‹

msgæ–‡ä»¶å°±æ˜¯ç®€å•çš„æ–‡æœ¬æ–‡ä»¶ï¼Œæ¯è¡Œéƒ½æœ‰ä¸€ä¸ªå­—æ®µç±»å‹å’Œå­—æ®µåç§°ã€‚å¯ä»¥ä½¿ç”¨çš„ç±»å‹ä¸ºï¼š

- int8, int16, int32, int64 (ä»¥åŠ uint*)
- float32, float64
- string
- time, duration
- å…¶ä»–msgæ–‡ä»¶



ä¸‹é¢ï¼Œæˆ‘ä»¬å°†åœ¨ä¹‹å‰åˆ›å»ºå¥½çš„åŠŸèƒ½åŒ…ä¸­å®šä¹‰ä¸€ä¸ªæ–°çš„æ¶ˆæ¯ç±»å‹ï¼š

```shell
vkrobot@vkrobotï¼š~$ roscd vkrobot_tutorials
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials$ mkdir msg
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials$ cd msg
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/msg$ touch my_msgs.msg
```



ç¼–è¾‘my_msgs.msgæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```
string name
uint8 age
uint8 sex

uint8 female = 0
uint8 male = 1
```



ç¼–è¾‘å®Œæˆåï¼Œä¿å­˜å¹¶é€€å‡ºï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹`package.xml`å’Œ`CMakeLists.txt`ä¸¤ä¸ªæ–‡ä»¶ï¼Œç¡®ä¿msgæ–‡ä»¶èƒ½è¢«è½¬æ¢ä¸ºC++ã€Pythonæˆ–å…¶ä»–è¯­è¨€çš„æºä»£ç 

1. ä¿®æ”¹`package.xml`

â€‹	æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š

```xml
  <build_depend>message_generation</build_depend>
  <exec_depend>message_runtime</exec_depend>
```

 

2. ä¿®æ”¹`CMakeLists.txt`

```python
# åœ¨find_packageä¸­æ·»åŠ message_generationçš„ä¾èµ–
find_package(catkin REQUIRED COMPONENTS
   roscpp
   rospy
   std_msgs
   message_generation
)

# é‡Šæ”¾add_message_fileså—ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰çš„msgæ–‡ä»¶
add_message_files(
  FILES
  my_msgs.msg
)

# é‡Šæ”¾generate_messageså—ï¼Œæ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯ä¾èµ–çš„æ‰€æœ‰åŠŸèƒ½åŒ…
generate_messages(
  DEPENDENCIES
  std_msgs
)

# åœ¨catkin_packageä¸­æ·»åŠ message_runtimeçš„ä¾èµ–
catkin_package(
  ...
  CATKIN_DEPENDS message_runtime ...
  ...)
```



ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¿®æ”¹å®Œæˆåï¼Œå›åˆ°å·¥ä½œç©ºé—´çš„æ ¹ç›®å½•å†æ¬¡ç¼–è¯‘

```shell
vkrobot@vkrobotï¼š~$ cd ~/catkin_ws
vkrobot@vkrobotï¼š~/catkin_ws$ catkin_make
```



ä»¥ä¸Šå°±æ˜¯åˆ›å»ºæ¶ˆæ¯çš„æ‰€æœ‰æ­¥éª¤ã€‚è®©æˆ‘ä»¬é€šè¿‡`rosmsg show`å‘½ä»¤çœ‹çœ‹ROSèƒ½å¦è¯†åˆ«å®ƒ

**ç”¨æ³•ï¼š**`rosmsg show [message_type]`

```shell
vkrobot@vkrobotï¼š~$ rosmsg show vkrobot_tutorials/my_msgs
uint8 female = 0
uint8 male = 1
string name
uint8 age
uint8 sex

æˆ–

vkrobot@vkrobotï¼š~$ rosmsg show my_msgs
[vkrobot_tutorials/my_msgs]ï¼š
uint8 female = 0
uint8 male = 1
string name
uint8 age
uint8 sex
```



#### ç»ƒä¹ 

è¯•ç€åˆ›å»ºä¸€ä¸ªå‘å¸ƒè€…èŠ‚ç‚¹å’Œä¸€ä¸ªè®¢é˜…è€…èŠ‚ç‚¹ï¼Œä¼ é€’è‡ªå®šä¹‰çš„æ¶ˆæ¯å§ğŸ˜€



`my_talker.py`

```python
#! /usr/bin/env python3

import rospy
from vkrobot_tutorials.msg import my_msgs

def talker()ï¼š
    pub = rospy.Publisher('chatter', my_msgs, queue_size=10)
    rospy.init_node('talker', anonymous=True)

    rate = rospy.Rate(10)
    while not rospy.is_shutdown()ï¼š
        msg = my_msgs()
        msg.name = "xiaowei"
        msg.age = 7
        msg.sex = msg.male  # or msg.sex = msg.female
        pub.publish(msg)
        rate.sleep()

if __name__  '__main__'ï¼š
    tryï¼š
        talker()
    except rospy.ROSInterruptExceptionï¼š
        pass
```



`my_listener.py`

```python
#! /usr/bin/env python3

import rospy
from vkrobot_tutorials.msg import my_msgs

def listener()ï¼š
    rospy.init_node('listener', anonymous=True)
    rospy.Subscriber('chatter', my_msgs, callback)
    rospy.spin()

def callback(data)ï¼š
    rospy.loginfo(rospy.get_caller_id() + " I heard %s", data)

if __name__  '__main__'ï¼š
    listener()
```



#### å¤ä¹ 

æ€»ç»“ä¸€ä¸‹æœ¬å°èŠ‚ä¸­æˆ‘ä»¬æ¥è§¦è¿‡çš„å‘½ä»¤ï¼š

* rosmsg = ros + msgï¼šæä¾›ä¸ROSæ¶ˆæ¯å®šä¹‰ç›¸å…³çš„ä¿¡æ¯



## 2.6 æœåŠ¡é€šä¿¡



### 2.6.1 è‡ªå®šä¹‰æœåŠ¡ç±»å‹

- srvï¼ˆæœåŠ¡ï¼‰ï¼šä¸€ä¸ªsrvæ–‡ä»¶æè¿°ä¸€ä¸ªæœåŠ¡ã€‚å®ƒç”±ä¸¤éƒ¨åˆ†ç»„æˆï¼šè¯·æ±‚ï¼ˆrequestï¼‰å’Œå“åº”ï¼ˆresponseï¼‰ã€‚

srvæ–‡ä»¶å’Œmsgæ–‡ä»¶ä¸€æ ·ï¼Œåªæ˜¯å®ƒä»¬åŒ…å«ä¸¤ä¸ªéƒ¨åˆ†ï¼šè¯·æ±‚å’Œå“åº”ã€‚è¿™ä¸¤éƒ¨åˆ†ç”¨ä¸€æ¡`---`çº¿éš”å¼€ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªsrvæ–‡ä»¶çš„ç¤ºä¾‹ï¼š

```
int64 A
int64 B
---
int64 sum
```



è®©æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰åˆ›å»ºçš„åŒ…å†æ¥åˆ›å»ºæœåŠ¡ï¼š

```shell
vkrobot@vkrobotï¼š~$ roscd vkrobot_tutorials
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials$ mkdir srv
```



æˆ‘ä»¬å°†ä»å¦ä¸€ä¸ªåŒ…å¤åˆ¶ç°æœ‰çš„srvå®šä¹‰ï¼Œè€Œä¸æ˜¯æ‰‹åŠ¨åˆ›å»ºæ–°çš„srvã€‚`roscp`æ˜¯ä¸€ä¸ªå®ç”¨çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œç”¨äºå°†æ–‡ä»¶ä»ä¸€ä¸ªåŒ…å¤åˆ¶åˆ°å¦ä¸€ä¸ªåŒ…ã€‚

**ç”¨æ³•ï¼š**`roscp [package_name] [file_to_copy_path] [copy_path]`

ç°åœ¨æˆ‘ä»¬å¯ä»¥ä»`rospy_tutorials`åŒ…ä¸­å¤åˆ¶ä¸€ä¸ªæœåŠ¡ï¼š

```shell
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials$ roscp rospy_tutorials AddTwoInts.srv srv/AddTwoInts.srv
```

> âš âš âš æ³¨æ„æ­¤æ—¶çš„ç»ˆç«¯è·¯å¾„ï¼ï¼ï¼



æ¥ä¸‹æ¥æˆ‘ä»¬è¿˜éœ€è¦ä¿®æ”¹`package.xml`å’Œ`CMakeLists.txt`ä¸¤ä¸ªæ–‡ä»¶ï¼Œç¡®ä¿srvæ–‡ä»¶èƒ½è¢«è½¬æ¢ä¸ºC++ã€Pythonæˆ–å…¶ä»–è¯­è¨€çš„æºä»£ç 

1. ä¿®æ”¹`package.xml`

â€‹	æ·»åŠ ä»¥ä¸‹ä¾èµ–é¡¹ï¼š

```xml
  <build_depend>message_generation</build_depend>
  <exec_depend>message_runtime</exec_depend>
```

> åœ¨è‡ªå®šä¹‰msgæ—¶ï¼Œå¦‚æœå·²ç»åšè¿‡ç›¸åŒçš„æ“ä½œï¼Œå¯ä»¥è·³è¿‡æ­¤æ­¥



2. ä¿®æ”¹`CMakeLists.txt`

```python
# åœ¨find_packageä¸­æ·»åŠ message_generationçš„ä¾èµ–
find_package(catkin REQUIRED COMPONENTS
   roscpp
   rospy
   std_msgs
   message_generation
)

# é‡Šæ”¾generate_messageså—ï¼Œæ·»åŠ è‡ªå®šä¹‰æ¶ˆæ¯ä¾èµ–çš„æ‰€æœ‰åŠŸèƒ½åŒ…
generate_messages(
  DEPENDENCIES
  std_msgs
)

# åœ¨catkin_packageä¸­æ·»åŠ message_runtimeçš„ä¾èµ–
catkin_package(
  ...
  CATKIN_DEPENDS message_runtime ...
  ...)

# ğŸ‘†ğŸ‘†ğŸ‘†ä¸Šé¢çš„å†…å®¹å¦‚æœåœ¨è‡ªå®šä¹‰msgæ—¶å·²åšè¿‡ç›¸åŒæ“ä½œå¯è·³è¿‡ğŸ‘†ğŸ‘†ğŸ‘†

# é‡Šæ”¾add_service_fileså—ï¼Œå¹¶æ·»åŠ è‡ªå®šä¹‰çš„msgæ–‡ä»¶
add_service_files(
  FILES
  AddTwoInts.srv
)
```



ä¸¤ä¸ªæ–‡ä»¶éƒ½ä¿®æ”¹å®Œæˆåï¼Œå›åˆ°å·¥ä½œç©ºé—´çš„æ ¹ç›®å½•å†æ¬¡ç¼–è¯‘

```shell
vkrobot@vkrobotï¼š~$ cd ~/catkin_ws
vkrobot@vkrobotï¼š~/catkin_ws$ catkin_make
```



ä»¥ä¸Šå°±æ˜¯åˆ›å»ºæ¶ˆæ¯çš„æ‰€æœ‰æ­¥éª¤ã€‚è®©æˆ‘ä»¬é€šè¿‡`rossrv show`å‘½ä»¤çœ‹çœ‹ROSèƒ½å¦è¯†åˆ«å®ƒ

**ç”¨æ³•ï¼š**`rossrv show <message_type>`

```shell
vkrobot@vkrobotï¼š~$ rossrv show vkrobot_tutorials/AddTwoInts
int64 a
int64 b
---
int64 sum

æˆ–

vkrobot@vkrobotï¼š~$ rosmsg show AddTwoInts
[vkrobot_tutorials/AddTwoInts]ï¼š
int64 a
int64 b
---
int64 sum

[rospy_tutorials/AddTwoInts]ï¼š
int64 a
int64 b
---
int64 sum
```

> è¿™é‡Œæ˜¾ç¤ºäº†ä¸¤ä¸ªæœåŠ¡ã€‚ç¬¬ä¸€ä¸ªæ˜¯åˆšåˆšåœ¨vkrobot_tutorialsåŒ…ä¸­åˆ›å»ºçš„ï¼Œç¬¬äºŒä¸ªæ˜¯ä¹‹å‰rospy_tutorialsåŒ…ä¸­å·²ç»å­˜åœ¨çš„ã€‚



#### å¤ä¹ 

æ€»ç»“ä¸€ä¸‹æœ¬å°èŠ‚ä¸­æˆ‘ä»¬æ¥è§¦è¿‡çš„å‘½ä»¤ï¼š

* roscp = ros + cpï¼šå°†æ–‡ä»¶ä»ROSåŒ…å¤åˆ¶åˆ°ROSåŒ…
* rossrv = ros + srvï¼šæä¾›ä¸ROSæœåŠ¡å®šä¹‰ç›¸å…³çš„ä¿¡æ¯



### 2.6.2 æœåŠ¡å™¨èŠ‚ç‚¹ç¼–ç¨‹å®ç°

```shell
vkrobot@vkrobotï¼š~$ roscd vkrobot_tutorials/scripts
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ touch add_two_ints_server.py
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x add_two_ints_server.py  #æ·»åŠ å¯æ‰§è¡Œæƒé™
```



ç¼–è¾‘add_two_ints_server.pyæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```python
#!/usr/bin/env python3
#æ¯ä¸ªPython ROSèŠ‚ç‚¹çš„æœ€å¼€å¤´éƒ½æœ‰è¿™ä¸ªå£°æ˜

import rospy  #å¦‚æœè¦ä½¿ç”¨pythonç¼–å†™ROSèŠ‚ç‚¹ï¼Œéƒ½éœ€è¦å¯¼å…¥rospy
#å¯¼å…¥è‡ªå®šä¹‰çš„æœåŠ¡æ•°æ®ç±»å‹ä¸å“åº”
from vkrobot_tutorials.srv import AddTwoInts,AddTwoIntsResponse

def callback(req)ï¼š
    #ç»ˆç«¯æ‰“å°ä¿¡æ¯
    print("Returning [%s + %s = %s]"%(req.a, req.b, (req.a + req.b)))
    #å‘é€å“åº”ä¿¡æ¯
    return AddTwoIntsResponse(req.a + req.b)

def add_two_ints_server()ï¼š
    #åˆå§‹åŒ–ROSèŠ‚ç‚¹ï¼Œå‚æ•°ä¸ºèŠ‚ç‚¹åç§°
    rospy.init_node('add_two_ints_server')
    #å‘ROS Masteræ³¨å†ŒèŠ‚ç‚¹ä¿¡æ¯ï¼Œå‚æ•°åŒ…æ‹¬ï¼ˆæœåŠ¡åç§°ï¼ŒæœåŠ¡ç±»å‹ï¼Œå›è°ƒå‡½æ•°ï¼‰
    s = rospy.Service('add_two_ints', AddTwoInts, callback)
    #ç»ˆç«¯æ‰“å°ä¿¡æ¯
    print("Ready to add two ints.")
    #é˜»å¡å¾ªç¯ï¼Œç­‰å¾…å®¢æˆ·ç«¯è¯·æ±‚ï¼Œä¸€æ—¦æ¥æ”¶åˆ°è¯·æ±‚åˆ™è¿›å…¥å›è°ƒå‡½æ•°è¿›è¡Œå¤„ç†
    rospy.spin()

if __name__  '__main__'ï¼š
    add_two_ints_server()
```



è¿è¡Œadd_two_ints_serverèŠ‚ç‚¹ï¼š

```shell
vkrobot@vkrobotï¼š~$ roscore #å…ˆå¯åŠ¨ROS Master
vkrobot@vkrobotï¼š~$ rosrun vkrobot_tutorials add_two_ints_server.py
```



è¿è¡ŒæˆåŠŸåï¼Œæ‰“å¼€ä¸€ä¸ªæ–°ç»ˆç«¯è°ƒç”¨æœåŠ¡ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosservice call add_two_ints â€œaï¼š 2
bï¼š 3â€
sumï¼š 5
```



### 2.6.3 å®¢æˆ·ç«¯èŠ‚ç‚¹ç¼–ç¨‹å®ç°

```shell
vkrobot@vkrobotï¼š~$ roscd vkrobot_tutorials/scripts
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ touch add_two_ints_client.py
vkrobot@vkrobotï¼š~/catkin_ws/src/vkrobot_tutorials/scripts$ chmod +x add_two_ints_client.py  #æ·»åŠ å¯æ‰§è¡Œæƒé™
```



ç¼–è¾‘add_two_ints_client.pyæ–‡ä»¶ï¼Œæ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```python
#!/usr/bin/env python3
#æ¯ä¸ªPython ROSèŠ‚ç‚¹çš„æœ€å¼€å¤´éƒ½æœ‰è¿™ä¸ªå£°æ˜

import rospy  #å¦‚æœè¦ä½¿ç”¨pythonç¼–å†™ROSèŠ‚ç‚¹ï¼Œéƒ½éœ€è¦å¯¼å…¥rospy
from vkrobot_tutorials.srv import *  #å¯¼å…¥è‡ªå®šä¹‰çš„æœåŠ¡æ•°æ®ç±»å‹
import sys  #ç”¨äºè·å–å‘½ä»¤è¡Œå‚æ•°

def add_two_ints_client(x, y)ï¼š
    #è°ƒç”¨æ­¤æ–¹æ³•å¯ä»¥è®©ç¨‹åºåœ¨æœåŠ¡å¯ç”¨ä¹‹å‰ä¸€ç›´é˜»å¡
    rospy.wait_for_service('add_two_ints')
    tryï¼š
        #ä¸ºæœåŠ¡çš„è°ƒç”¨åˆ›å»ºäº†ä¸€ä¸ªå¥æŸ„ï¼ˆhandleï¼‰ï¼Œç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå¥æŸ„ï¼Œåƒæ™®é€šå‡½æ•°ä¸€æ ·è°ƒç”¨å®ƒï¼Œå‚æ•°ï¼ˆæœåŠ¡åç§°ï¼ŒæœåŠ¡æ•°æ®ç±»å‹ï¼‰
        add_two_ints = rospy.ServiceProxy('add_two_ints', AddTwoInts)
        #è·å–æœåŠ¡å™¨å“åº”
        response = add_two_ints(x, y)
        return response.sum
    #å¦‚æœæœåŠ¡è°ƒç”¨å¤±è´¥ï¼Œrospy.ServiceExceptionä¼šæŠ›å‡ºå¼‚å¸¸
    except rospy.ServiceException as eï¼š
        print("Service call failedï¼š %s"%e)

if __name__  '__main__'ï¼š
    #åˆ¤æ–­å‘½ä»¤è¡Œå‚æ•°é•¿åº¦æ˜¯å¦ä¸º3ï¼Œï¼ˆç¨‹åºåï¼Œæ•´æ•°1ï¼Œæ•´æ•°2ï¼‰
    if len(sys.argv)  3ï¼š
        x = int(sys.argv[1])
        y = int(sys.argv[2])
    elseï¼š
        print("Only accepted two parameters")
        sys.exit(1)
    print("Requesting %s + %s"%(x, y))
    print("%s + %s = %s"%(x, y, add_two_ints_client(x, y)))
```



è¿è¡Œadd_two_ints_clientèŠ‚ç‚¹ï¼š

```shell
vkrobot@vkrobotï¼š~$ rosrun vkrobot_tutorials add_two_ints_client.py 2 3
Requesting 2 + 3
2 + 3 = 5
```

> âš âš âš ç¡®ä¿ROS Masterä¸serverèŠ‚ç‚¹å·²å¯åŠ¨



#### ç»ƒä¹ 

å·²çŸ¥å°æµ·é¾ŸèŠ‚ç‚¹æä¾›äº†`/spawn`æœåŠ¡ï¼Œè¯·ç¼–å†™ä»£ç è°ƒç”¨æ­¤æœåŠ¡ï¼šsmileyï¼š



`turtle_spawn.py`

```python
#! /usr/bin/env python3

import rospy
from turtlesim.srv import Spawn, SpawnRequest
import sys

def turtle_spawn_client(x, y, theta, name)ï¼š
    rospy.wait_for_service('spawn')
    tryï¼š
        turtle_spawn = rospy.ServiceProxy('spawn', Spawn)
        response = turtle_spawn(x, y, theta, name)
        return response.name

    except rospy.ServiceException as eï¼š
        rospy.loginfo("Service call failedï¼š %s" % e)

if __name__  '__main__'ï¼š
    if len(sys.argv)  5ï¼š
        x = float(sys.argv[1])
        y = float(sys.argv[2])
        theta = float(sys.argv[3])
        name = str(sys.argv[4])
    elseï¼š
        rospy.loginfo("Only accepted four parameters.")
        sys.exit(1)
    print("Spawning %s" % turtle_spawn_client(x, y, theta, name))
```

